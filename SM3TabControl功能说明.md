# SM3TabControl 功能说明

## 概述
基于SM3Util工具类，新增了SM3TabControl用户控件，为CryptoTool工具提供了完整的SM3哈希算法功能。SM3是中华人民共和国政府采用的密码散列函数标准，由国家密码管理局于2010年12月17日发布。

## 功能特性

### 1. SM3哈希计算 (groupBoxSM3Hash)
**功能描述**: 对任意数据进行SM3哈希计算

**主要控件**:
- 输入格式选择: Text/Hex/Base64
- 输出格式选择: Hex/Base64  
- 输入数据文本框: 支持多行输入
- 哈希结果文本框: 只读显示结果
- 计算哈希按钮: 执行哈希计算
- 清空按钮: 清空输入和输出

**使用方法**:
1. 选择输入数据的格式（文本、16进制、Base64）
2. 选择输出结果的格式（16进制、Base64）
3. 在输入框中输入要计算哈希的数据
4. 点击"计算哈希"按钮
5. 在结果框中查看SM3哈希值

### 2. 文件哈希计算 (groupBoxSM3File)  
**功能描述**: 计算文件的SM3哈希值，支持大文件处理

**主要控件**:
- 输出格式选择: Hex/Base64
- 文件路径文本框: 显示选中文件路径
- 选择文件按钮: 打开文件选择对话框
- 哈希结果文本框: 只读显示文件哈希值
- 计算哈希按钮: 执行文件哈希计算

**使用方法**:
1. 选择输出格式（16进制或Base64）
2. 点击"选择文件"按钮选择要计算哈希的文件
3. 点击"计算哈希"按钮
4. 查看文件的SM3哈希值和文件大小信息

**特点**:
- 支持任意大小的文件
- 使用流式读取，内存占用小
- 自动显示文件大小（支持B/KB/MB/GB单位）

### 3. 哈希值验证 (groupBoxSM3Verify)
**功能描述**: 验证数据的SM3哈希值是否正确

**主要控件**:
- 数据格式选择: Text/Hex/Base64
- 哈希格式选择: Hex/Base64
- 原始数据文本框: 输入要验证的数据
- 期望哈希文本框: 输入期望的哈希值
- 验证按钮: 执行哈希验证
- 验证结果标签: 显示验证结果（绿色成功/红色失败）

**使用方法**:
1. 选择原始数据的格式
2. 选择期望哈希值的格式
3. 输入原始数据
4. 输入期望的哈希值
5. 点击"验证"按钮
6. 查看验证结果

### 4. HMAC-SM3计算 (groupBoxSM3HMAC)
**功能描述**: 使用SM3算法计算HMAC（Hash-based Message Authentication Code）

**主要控件**:
- 数据格式选择: Text/Hex/Base64  
- 输出格式选择: Hex/Base64
- 输入数据文本框: 要计算HMAC的数据
- HMAC密钥文本框: HMAC密钥（UTF-8编码）
- HMAC结果文本框: 只读显示HMAC结果
- 计算HMAC按钮: 执行HMAC计算

**使用方法**:
1. 选择输入数据格式
2. 选择输出格式
3. 输入要计算HMAC的数据
4. 输入HMAC密钥
5. 点击"计算HMAC"按钮
6. 查看HMAC-SM3结果

## 技术实现

### 依赖工具类
- `SM3Util`: 提供完整的SM3算法实现
- 基于BouncyCastle加密库
- 支持增量计算和流式处理

### 数据格式支持
- **Text**: UTF-8编码的文本数据
- **Hex**: 16进制字符串（不区分大小写）
- **Base64**: Base64编码字符串

### 输出格式
- **Hex**: 大写16进制字符串
- **Base64**: 标准Base64编码字符串

### 错误处理
- 完善的异常捕获和用户提示
- 输入验证和格式检查
- 友好的错误信息显示

## 界面特色

### 布局设计
- 采用GroupBox分组布局，功能划分清晰
- 控件对齐整齐，界面美观
- 支持窗体缩放和自适应布局

### 用户体验
- 默认设置合理的初始值和示例数据
- 实时状态更新和操作反馈
- 颜色标识验证结果（绿色成功/红色失败）
- 支持大文件处理进度提示

### 快捷操作
- 一键清空输入输出
- 文件选择对话框
- 复制粘贴支持
- 多行文本编辑支持

## 应用场景

1. **数据完整性校验**: 验证文件或数据是否被篡改
2. **数字签名**: 为SM2数字签名提供哈希预处理
3. **密码存储**: 安全存储密码的哈希值
4. **消息认证**: 使用HMAC-SM3进行消息认证
5. **随机数生成**: 作为随机数生成器的熵源
6. **密码学研究**: SM3算法的学习和测试

## 与其他模块的集成

- **SM2算法**: SM3作为SM2数字签名的哈希函数
- **文件校验**: 可与文件加密解密功能配合使用
- **医保接口**: 可用于医保数据的完整性校验
- **密码学工具链**: 作为完整密码学工具的重要组成部分

## 性能特点

- **高效算法**: 基于优化的SM3实现
- **内存友好**: 流式处理大文件，内存占用低
- **多格式支持**: 灵活的输入输出格式转换
- **错误容错**: robust的异常处理机制

SM3TabControl的加入使CryptoTool成为了更完整的国密算法工具集，为用户提供了专业、易用的SM3哈希计算和验证功能。